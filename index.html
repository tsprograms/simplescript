<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>SimpleScript</title>
    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="src.js"></script>
    <script>
      var input;
      var output;
      document.addEventListener('DOMContentLoaded', function() {
        input = document.getElementById('input');
        output = document.getElementById('output');
        
        input.focus();
        input.addEventListener('keydown', function(event) {
          if (event.keyCode === 13) {
            var outFunc = function(out, isDirect, isCmd) {
              var el = document.createElement('div');
              if (isDirect) {
                el.className = 'repl-direct';
                out = simpleScript.valToString(out);
              }
              else if (isCmd) {
                el.className = 'repl-cmd';
                out = '[$] ' + out;
              }
              else {
                out = '[log] ' + out;
              }
              el.textContent = out;
              el.innerText   = out;
              output.appendChild(el);
              return true;
            };
            outFunc(input.value, false, true);
            outFunc(simpleScript.run(input.value, undefined, outFunc), true);
            input.value = '';
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="output"></div>
    <span id="input-prefix">[$]&nbsp;</span>
    <input id="input" type="text" placeholder="Type a command">
  </body>
</html>
